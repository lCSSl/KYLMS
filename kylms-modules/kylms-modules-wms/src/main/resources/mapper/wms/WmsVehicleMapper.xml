<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kaiyu56.wms.mapper.WmsVehicleMapper">

    <resultMap type="com.kaiyu56.wms.domain.WmsVehicle" id="WmsVehicleResult">
        <result property="vehicleId"    column="vehicle_id"    />
        <result property="vehicleCode"    column="vehicle_code"    />
        <result property="vehiclePlate"    column="vehicle_plate"    />
        <result property="vehicleType"    column="vehicle_type"    />
        <result property="vehicleSource"    column="vehicle_source"    />
        <result property="vehicleWidth"    column="vehicle_width"    />
        <result property="vehicleLength"    column="vehicle_length"    />
        <result property="vehicleHeight"    column="vehicle_height"    />
        <result property="vehicleLongitude"    column="vehicle_longitude"    />
        <result property="vehicleLatitude"    column="vehicle_latitude"    />
        <result property="deptId"    column="dept_id"    />
        <result property="deptName"    column="dept_name"    />
        <result property="vehicleStatus"    column="vehicle_status"    />
        <result property="status"    column="status"    />
        <result property="delFlag"    column="del_flag"    />
        <result property="createBy"    column="create_by"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateBy"    column="update_by"    />
        <result property="updateTime"    column="update_time"    />
        <result property="remark"    column="remark"    />
    </resultMap>
    <resultMap type="com.kaiyu56.wms.api.domain.vo.WmsVehicleLL" id="WmsVehicleLLResult">
        <result property="lng"    column="lng"    />
        <result property="lat"    column="lat"    />
    </resultMap>

    <sql id="selectWmsVehicleVo">
        select vehicle_id, vehicle_code, vehicle_plate, vehicle_type, vehicle_source, vehicle_width, vehicle_length, vehicle_height,vehicle_longitude,vehicle_latitude, dept_id,dept_name,vehicle_status ,status, del_flag, create_by, create_time, update_by, update_time, remark from wms_vehicle
    </sql>

    <select id="selectWmsVehicleList" parameterType="com.kaiyu56.wms.domain.WmsVehicle" resultMap="WmsVehicleResult">
        <include refid="selectWmsVehicleVo"/>
        <where>
            <if test="vehicleCode != null  and vehicleCode != ''"> and vehicle_code like concat('%', #{vehicleCode}, '%')</if>
            <if test="vehiclePlate != null  and vehiclePlate != ''"> and vehicle_plate like concat('%', #{vehiclePlate}, '%')</if>
            <if test="vehicleType != null  and vehicleType != ''"> and vehicle_type = #{vehicleType}</if>
            <if test="vehicleSource != null  and vehicleSource != ''"> and vehicle_source = #{vehicleSource}</if>
            <if test="vehicleWidth != null "> and vehicle_width <![CDATA[>=]]>  #{vehicleWidth}</if>
            <if test="vehicleLength != null "> and vehicle_length <![CDATA[>=]]>  #{vehicleLength}</if>
            <if test="vehicleHeight != null "> and vehicle_height <![CDATA[>=]]> #{vehicleHeight}</if>
            <if test="deptId != null "> and dept_id = #{deptId}</if>
            <if test="vehicleStatus != null  and vehicleStatus != ''"> and vehicle_status = #{vehicleStatus,jdbcType=VARCHAR}</if>
            <if test="status != null  and status != ''"> and status = #{status}</if>
        </where>
    </select>

    <select id="selectWmsVehicleById" parameterType="Long" resultMap="WmsVehicleResult">
        <include refid="selectWmsVehicleVo"/>
        where vehicle_id = #{vehicleId}
    </select>

    <insert id="insertWmsVehicle" parameterType="com.kaiyu56.wms.domain.WmsVehicle" useGeneratedKeys="true" keyProperty="vehicleId">
        insert into wms_vehicle
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="vehicleCode != null and vehicleCode != ''">vehicle_code,</if>
            <if test="vehiclePlate != null">vehicle_plate,</if>
            <if test="vehicleType != null">vehicle_type,</if>
            <if test="vehicleSource != null">vehicle_source,</if>
            <if test="vehicleWidth != null">vehicle_width,</if>
            <if test="vehicleLength != null">vehicle_length,</if>
            <if test="vehicleHeight != null">vehicle_height,</if>
            <if test="vehicleLongitude != null">vehicle_longitude,</if>
            <if test="vehicleLatitude != null">vehicle_latitude,</if>
            <if test="deptId != null">dept_id,</if>
            <if test="deptName != null">dept_name,</if>
            <if test="vehicleStatus != null and vehicleStatus != ''">vehicle_status,</if>
            <if test="status != null and status != ''">status,</if>
            <if test="delFlag != null">del_flag,</if>
            <if test="createBy != null">create_by,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateBy != null">update_by,</if>
            <if test="updateTime != null">update_time,</if>
            <if test="remark != null">remark,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="vehicleCode != null and vehicleCode != ''">#{vehicleCode},</if>
            <if test="vehiclePlate != null">#{vehiclePlate},</if>
            <if test="vehicleType != null">#{vehicleType},</if>
            <if test="vehicleSource != null">#{vehicleSource},</if>
            <if test="vehicleWidth != null">#{vehicleWidth},</if>
            <if test="vehicleLength != null">#{vehicleLength},</if>
            <if test="vehicleHeight != null">#{vehicleHeight},</if>
            <if test="vehicleLongitude != null">#{vehicleLongitude},</if>
            <if test="vehicleLatitude != null">#{vehicleLatitude},</if>
            <if test="deptId != null">#{deptId},</if>
            <if test="deptName != null">#{deptName,jdbcType=VARCHAR},</if>
            <if test="vehicleStatus != null and vehicleStatus != ''">#{vehicleStatus,jdbcType=VARCHAR},</if>
            <if test="status != null and status != ''">#{status},</if>
            <if test="delFlag != null">#{delFlag},</if>
            <if test="createBy != null">#{createBy},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateBy != null">#{updateBy},</if>
            <if test="updateTime != null">#{updateTime},</if>
            <if test="remark != null">#{remark},</if>
         </trim>
    </insert>

    <update id="updateWmsVehicle" parameterType="com.kaiyu56.wms.domain.WmsVehicle">
        update wms_vehicle
        <trim prefix="SET" suffixOverrides=",">
            <if test="vehicleCode != null and vehicleCode != ''">vehicle_code = #{vehicleCode},</if>
            <if test="vehiclePlate != null">vehicle_plate = #{vehiclePlate},</if>
            <if test="vehicleType != null">vehicle_type = #{vehicleType},</if>
            <if test="vehicleSource != null">vehicle_source = #{vehicleSource},</if>
            <if test="vehicleWidth != null">vehicle_width = #{vehicleWidth},</if>
            <if test="vehicleLength != null">vehicle_length = #{vehicleLength},</if>
            <if test="vehicleHeight != null">vehicle_height = #{vehicleHeight},</if>
            <if test="vehicleLongitude != null"> vehicle_longitude=#{vehicleLongitude},</if>
            <if test="vehicleLatitude != null">vehicle_latitude=#{vehicleLatitude},</if>
            <if test="deptId != null">dept_id = #{deptId},</if>
            <if test="deptName != null">dept_name = #{deptName,jdbcType=VARCHAR},</if>
            <if test="vehicleStatus != null and vehicleStatus != ''">vehicle_status = #{vehicleStatus,jdbcType=VARCHAR},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            <if test="delFlag != null">del_flag = #{delFlag},</if>
            <if test="createBy != null">create_by = #{createBy},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateBy != null">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
            <if test="remark != null">remark = #{remark},</if>
        </trim>
        where vehicle_id = #{vehicleId}
    </update>

    <delete id="deleteWmsVehicleById" parameterType="Long">
        delete from wms_vehicle where vehicle_id = #{vehicleId}
    </delete>

    <delete id="deleteWmsVehicleByIds" parameterType="String">
        delete from wms_vehicle where vehicle_id in
        <foreach item="vehicleId" collection="array" open="(" separator="," close=")">
            #{vehicleId}
        </foreach>
    </delete>

  <select id="selectLngAndLatById" parameterType="Long" resultMap="WmsVehicleLLResult">
    select vehicle_longitude as lng, vehicle_latitude as lat
    from wms_vehicle
    where vehicle_id = #{vehicle_id}
  </select>
</mapper>